{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function getPhotos(q) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '44946850-4c776fe0ffa968f959f660738',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}?${params}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        throw new Error('No images found');\n      }\n      return data;\n    });\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(el => {\n      return `<li class=\"gallery-list\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img src=\"${el.webformatURL}\" alt=\"${el.tags}\" title=\"${el.tags}\">\n        </a>\n        <div >\n          <ul class=\"text-list\">\n            <li class=\"text-item\"><p class=\"text\"><span class=\"text-span\">Likes</span><span class=\"link-span\">${el.likes}</span></p></li>\n            <li class=\"text-item\"><p class=\"text\"><span class=\"text-span\">Views</span><span class=\"link-span\">${el.views}</span></p></li>\n            <li class=\"text-item\"><p class=\"text\"><span class=\"text-span\">Comments</span><span class=\"link-span\">${el.comments}</span></p></li>\n            <li class=\"text-item\"><p class=\"text\"><span class=\"text-span\">Downloads</span><span class=\"link-span\">${el.downloads}</span></p></li>\n          </ul>\n        </div>\n      </li>`;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createMarkup } from './js/render-functions';\nimport { getPhotos } from './js/pixabay-api';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnSearch: document.querySelector('.btn-search'),\n  imgList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\n\nlet lightbox;\n\nrefs.form.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const input = e.target.elements.text.value.trim();\n\n  if (!input) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  refs.loader.classList.remove('loader--hidden');\n\n  refs.imgList.innerHTML = '';\n\n  getPhotos(input)\n    .then(res => {\n      if (res.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n      refs.imgList.innerHTML = createMarkup(res.hits);\n      if (lightbox) {\n        lightbox.refresh();\n      } else {\n        lightbox = new SimpleLightbox('.gallery-link', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      console.error('Fetch error: ', error);\n    })\n    .finally(() => {\n      refs.loader.classList.add('loader--hidden');\n    });\n\n  e.currentTarget.reset();\n});\n\nwindow.addEventListener('load', () => {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('loader--hidden');\n});\n"],"names":["getPhotos","q","BASE_URL","params","response","data","createMarkup","arr","el","refs","lightbox","e","input","iziToast","res","SimpleLightbox","error"],"mappings":"6vBAAO,SAASA,EAAUC,EAAG,CAC3B,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGC,CAAQ,IAAIC,CAAM,EAAE,EACjC,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,OAAOA,CACb,CAAK,CACL,CCvBO,SAASC,EAAaC,EAAK,CAChC,OAAOA,EACJ,IAAIC,GACI;AAAA,wCAC2BA,EAAG,aAAa;AAAA,sBAClCA,EAAG,YAAY,UAAUA,EAAG,IAAI,YAAYA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA,gHAIuCA,EAAG,KAAK;AAAA,gHACRA,EAAG,KAAK;AAAA,mHACLA,EAAG,QAAQ;AAAA,oHACVA,EAAG,SAAS;AAAA;AAAA;AAAA,YAI3H,EACA,KAAK,EAAE,CACZ,CCTA,MAAMC,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,aAAa,EAC/C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,IAAIC,EAEJD,EAAK,KAAK,iBAAiB,SAAUE,GAAK,CACxCA,EAAE,eAAc,EAEhB,MAAMC,EAAQD,EAAE,OAAO,SAAS,KAAK,MAAM,OAE3C,GAAI,CAACC,EAAO,CACVC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDJ,EAAK,OAAO,UAAU,OAAO,gBAAgB,EAE7CA,EAAK,QAAQ,UAAY,GAEzBT,EAAUY,CAAK,EACZ,KAAKE,GAAO,CACX,GAAIA,EAAI,KAAK,SAAW,EAAG,CACzBD,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EACD,MACD,CACDJ,EAAK,QAAQ,UAAYH,EAAaQ,EAAI,IAAI,EAC1CJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIK,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACxB,CAAS,CAET,CAAK,EACA,MAAMC,GAAS,CACdH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EACD,QAAQ,MAAM,gBAAiBG,CAAK,CAC1C,CAAK,EACA,QAAQ,IAAM,CACbP,EAAK,OAAO,UAAU,IAAI,gBAAgB,CAChD,CAAK,EAEHE,EAAE,cAAc,OAClB,CAAC,EAED,OAAO,iBAAiB,OAAQ,IAAM,CACrB,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,gBAAgB,CACvC,CAAC"}